 
-- Bootstrap lazy.nvim
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ lazy.nvim –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö
local lazypath = vim.fn.stdpath("data") .. "/lazy/lazy.nvim"
if not (vim.uv or vim.loop).fs_stat(lazypath) then
    -- –ï—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∫–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
    local lazyrepo = "https://github.com/folke/lazy.nvim.git"
    local cmd = {
        "git", "clone", "--filter=blob:none", "--branch=stable",
        lazyrepo, lazypath,
        "--progress", "--verbose"
    }
    local out = vim.fn.system(cmd)

    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏
    if vim.v.shell_error ~= 0 then
        -- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞, –≤—ã–≤–æ–¥–∏–º –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        local error_msg = string.format(
            [[
            Failed to clone lazy.nvim:
            %s
            Please check:
            1. Git installation: git --version
            2. Network connection
            3. Permissions: chmod 755 %s
            ]],
            out,
            lazypath
        )
        vim.api.nvim_echo({{error_msg, "ErrorMsg"}}, true, {})
        vim.fn.getchar()
        os.exit(1)
    end
end

-- –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ lazy.nvim –≤ runtime path
vim.opt.rtp:prepend(lazypath)

-- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–ª–∞–≥–∏–Ω—ã
require("lazy").setup({
    spec = {
        -- –ü–ª–∞–≥–∏–Ω –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –∫–æ–¥—É
        { "phaazon/hop.nvim" },

        -- –ü–ª–∞–≥–∏–Ω –¥–ª—è —Ñ–∞–π–ª–æ–≤–æ–≥–æ –¥–µ—Ä–µ–≤–∞
        {
            "nvim-neo-tree/neo-tree.nvim",
            branch = "v3.x",
            dependencies = {
                -- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è neo-tree
                "nvim-lua/plenary.nvim",    -- –£—Ç–∏–ª–∏—Ç—ã
                "nvim-tree/nvim-web-devicons", -- –ò–∫–æ–Ω–∫–∏
                "MunifTanjim/nui.nvim",     -- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
            },
            config = function()
                -- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ neo-tree
                require("neo-tree").setup({
                    sources = {
                        filesystem = {
                            follow_current_file = true,
                            group_empty_dirs = true,
                        },
                        git_status = {
                            show_untracked = true,
                        },
                    },
                    default_component_configs = {
                        indent = {
                            with_markers = true,
                            indent_size = 2,
                            last_indent_marker = "‚îî",
                            marker_patterns = {
                                "Óòí", "Óòï", "Óòã", "ÓòÄ",
                                "ÓòÅ", "ÓòÇ", "ÓòÉ", "ÓòÑ"
                            },
                        },
                    },
                })
            end,
        },

        -- –ü–ª–∞–≥–∏–Ω –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
        { "nvim-treesitter/nvim-treesitter" },

        -- –ü–ª–∞–≥–∏–Ω –¥–ª—è —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        { "vim-airline/vim-airline" },

        -- –ü–ª–∞–≥–∏–Ω –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç—Å—Ç—É–ø–æ–≤
        {
            "lukas-reineke/indent-blankline.nvim",
            opts = {
                show_current_context = true,
                show_current_context_start = true,
                show_end_of_line = true,
                space_char_blankline = " ",
            },
        },

        -- –ü–ª–∞–≥–∏–Ω –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ –∫–ª–∞–≤–∏—à
        {
            "folke/which-key.nvim",
            event = "VeryLazy",
            opts = {
                window = {
                    border = "rounded",
                    margin = { 1, 1, 1, 1 },
                },
            },
        },

        -- LSP –∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
        {
            "neovim/nvim-lspconfig",
            dependencies = {
                -- –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ LSP
                "williamboman/mason.nvim",
                "williamboman/mason-lspconfig.nvim",
                "williamboman/mason-tool-installer.nvim",
                -- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è LSP
                "j-hui/fidget.nvim",
                -- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
                "hrsh7th/nvim-cmp",
                "hrsh7th/cmp-nvim-lsp",
                "L3MON4D3/LuaSnip",
                "saadparwaiz1/cmp_luasnip",
            },
            config = function()
                require("plugins.lsp")
            end,
        },

        -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è
        { "hrsh7th/cmp-nvim-lsp" },
        { "hrsh7th/cmp-buffer" },
        { "hrsh7th/cmp-path" },
        { "hrsh7th/cmp-cmdline" },
        { "hrsh7th/nvim-cmp" },

        -- –£—Ç–∏–ª–∏—Ç—ã
        { "williamboman/mason.nvim" },

        -- –ü–ª–∞–≥–∏–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞
        {
            "nvim-telescope/telescope.nvim",
            tag = "0.1.8",
            dependencies = { "nvim-lua/plenary.nvim" },
        },

        -- –§–æ—Ä–º–∞—Ç—Ç–µ—Ä –∫–æ–¥–∞
        {
            "stevearc/conform.nvim",
            opts = {
                notify_on_error = false,
                format_on_save = {
                    timeout_ms = 500,
                    lsp_fallback = true,
                },
                formatters_by_ft = {
                    lua = { "stylua" },
                    c = { "clang-format" },
                },
            },
        },

        -- –¢–µ–º–∞
        { "rose-pine/neovim", name = "rose-pine" },

        -- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –æ–∫–Ω–∞–º–∏
        { "christoomey/vim-tmux-navigator" },

        -- –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
        { "numToStr/Comment.nvim", opts = {} },

        -- –ü–∞–Ω–µ–ª—å –±—É—Ñ–µ—Ä–æ–≤
        { "akinsho/bufferline.nvim", version = "*", dependencies = "nvim-tree/nvim-web-devicons" },

        -- –û—Ç–ª–∞–¥—á–∏–∫
        require("plugins.debug"),
    },

    -- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UI
    ui = {
        -- –ò–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        icons = vim.g.have_nerd_font and {} or {
            cmd = "‚åò",
            config = "üõ†",
            event = "üìÖ",
            ft = "üìÇ",
            init = "‚öô",
            keys = "üóù",
            plugin = "üîå",
            runtime = "üíª",
            require = "üåô",
            source
